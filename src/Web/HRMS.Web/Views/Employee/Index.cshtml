












@model HRMS.Application.CommonModel.PaginationModel<HRMS.Application.ViewModel.EmployeeVm>

@{
    string currentSearch = Context.Request.Query["search"];
    int sl = ((Model.PageNumber - 1) * Model.PageSize) + 1;
}

<div class="container-fluid px-0 mt-2 ">
    <div class="d-flex justify-content-between align-items-center mb-3">

        <!-- Search -->
        <form class="d-flex ml-2" method="get">
            <input type="text" name="search" class="form-control me-2" placeholder="Search by employee name..." value="@currentSearch" />
            <button type="submit" class="btn btn-primary">Search</button>
        </form>

        <!-- Excel Controls -->
        <div class="d-flex justify-content-center gap-2 mt-2 mt-md-0">
            <a href="@Url.Action("download-demo-excel", "employee")"
               class="btn btn-outline-secondary d-flex align-items-center gap-2">
                <i class="bi bi-file-earmark-arrow-down"></i> Download Demo
            </a>

            <form asp-action="UploadExcel" asp-controller="Employee" method="post"
                  enctype="multipart/form-data" class="d-flex align-items-center gap-2">
                <input type="file" name="file" accept=".xlsx,.xls" class="form-control form-control-sm"
                       style="width: 200px;" required />
                <button type="submit" class="btn btn-success d-flex align-items-center gap-2">
                    <i class="bi bi-file-earmark-arrow-up"></i> Upload Excel
                </button>
            </form>
        </div>

        <!-- Create -->
        <a href="@Url.Action("create-or-edit", "employee")"
           class="btn btn-success d-flex align-items-center gap-2 mr-2" title="Create New Employee">
            <svg class="d-block d-sm-none" width="20" height="20" fill="none" stroke="currentColor"
                 viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M12 4v16m8-8H4"></path>
            </svg>
            <span class="d-none d-sm-inline">Create</span>
        </a>
    </div>

    <!-- Employeee Information Buttono -->
    <div class="btn btn-primary my-2 ms-3">
        <a asp-action="CreateOrEdit" asp-controller="Employee" class="btn btn-primary d-inline-block">
            Employee Information
        </a>


    </div>


    <div class="table-responsive">
        <table class="table table-bordered table-hover table-striped shadow-sm">
            <thead class="table-dark">


                <tr>
                    <th>Sl No</th>
                    <th>Employee ID</th>
                    <th>Old Employee ID</th>
                    <th>RFID</th>
                    <th>Name</th>
                    <th>Designation</th>
                    <th>Joining Date</th>
                    <th>Reg No</th>
                    <th>Official Number</th>
                    <th>Official Email</th>
                    <th>Department</th>
                    <th>Employee Type</th>
                    <th>Resignation Date</th>
                    <th>Is Active</th>
                    <th>Current Workstation</th>
                    <th>Place of Posting</th>
                    <th>Present District</th>
                    <th>Permanent District</th>
                    <th>Suspension Status</th>
                    <th>Shift Type</th>
                    <th>Date of Birth</th>
                    <th>Sex</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Profile Picture</th>
                    <th>NID</th>
                    <th>Religion</th>
                    <th>Nationality</th>
                    <th>Passport No</th>
                    <th>Driving License</th>
                    <th>Blood Group</th>
                    <th>Father Name</th>
                    <th>Mother Name</th>
                    <th>Marital Status</th>
                    <th>Spouse Name</th>
                    <th>Is Freedom Fighter</th>
                    <th>Remarks</th>
                    <th>Type of Death</th>
                    <th>Gross Salary</th>
                    <th>Basic Salary</th>
                    <th>House Rent</th>
                    <th>Transport Allowance</th>
                    <th>Medical Allowance</th>
                    <th>Food Allowance</th>
                    <th>Bonus Allowance</th>
                    <th>Other Allowance</th>
                    <th>Attendance Bonus</th>
                    <th>Breakfast Allowance</th>
                    <th>Tiffin Allowance</th>
                    <th>Leave Fare Assistance</th>
                    <th>Advance Salary</th>
                    <th>Loan from Company</th>
                    <th>Fine</th>
                    <th>Mobile Bill</th>
                    <th>Overtime</th>
                    <th>Increment</th>
                    <th>Festival Bonus</th>
                    <th>Performance Bonus</th>
                    <th>Maternity Leave</th>
                    <th>Maternity Leave Amount</th>
                    <th>Actions</th>
                </tr>

            </thead>
            <tbody>


                @foreach (var item in Model.Items)
                {
                    <tr>
                        <td>@sl</td>
                        <td>@item.EmployeeIdCardNo</td>
                        <td>@item.OldEmployeeIdCardNo</td>
                        <td>@item.RFID</td>
                        <td>@item.EmployeeName</td>
                        <td>@item.Designation</td>
                        <td>@item.JoiningDate.ToString("dd/MM/yyyy")</td>
                        <td>@item.RegNo</td>
                        <td>@item.OfficialNumber</td>
                        <td>@item.OfficialEmail</td>
                        <td>@item.Department</td>
                        <td>@item.EmployeeType</td>
                        <td>@item.ResignationDate?.ToString("dd/MM/yyyy")</td>
                        <td>@(item.IsActive ? "Yes" : "No")</td>
                        <td>@item.CurrentWorkstation</td>
                        <td>@item.PalceOfPosting</td>
                        <td>@item.PresentDistrict</td>
                        <td>@item.ParmanentDistrict</td>
                        <td>@item.SuspensionStatusName</td>
                        <td>@item.ShiftType</td>
                        <td>@item.DateOfBirth?.ToString("dd/MM/yyyy")</td>
                        <td>@item.Sex</td>
                        <td>@item.PhoneNumber</td>
                        <td>@item.Email</td>
                        <td>
                            @if (!string.IsNullOrEmpty(item.ProfilePicture))
                            {
                                <img src="@item.ProfilePicture" alt="Profile" width="50" height="50" />
                            }
                        </td>
                        <td>@item.NID</td>
                        <td>@item.Religion</td>
                        <td>@item.Nationality</td>
                        <td>@item.PassportNo</td>
                        <td>@item.DrivingLicense</td>
                        <td>@item.BloodGroup</td>
                        <td>@item.FatherName</td>
                        <td>@item.MotherName</td>
                        <td>@item.MaritalStatus</td>
                        <td>@item.SpouseName</td>
                        <td>@(item.IsFreedomFither == true ? "Yes" : "No")</td>
                        <td>@item.Remarks</td>
                        <td>@item.TypeofDeath</td>
                        <td>@item.GrossSalary</td>
                        <td>@item.BasicSalary</td>
                        <td>@item.HouseRent</td>
                        <td>@item.TransportAllowance</td>
                        <td>@item.MedicalAllowance</td>
                        <td>@item.FoodAllowance</td>
                        <td>@item.BonusAllowance</td>
                        <td>@item.OthersAllowance</td>
                        <td>@item.AttendanceBonus</td>
                        <td>@item.BreakFastAllowance</td>
                        <td>@item.TiffinAllowance</td>
                        <td>@item.LeaveFareAssistance</td>
                        <td>@item.AdvanceSalary</td>
                        <td>@item.LoanfromCompany</td>
                        <td>@item.Fine</td>
                        <td>@item.MobileBill</td>
                        <td>@item.Overtime</td>
                        <td>@item.Increment</td>
                        <td>@item.FestivalBonus</td>
                        <td>@item.PerformaceBonus</td>
                        <td>@item.MaternityLeave</td>
                        <td>@item.MaternityLeaveAmount</td>

                        <td class="d-flex gap-2">
                            <!-- Edit -->
                            <a href="@Url.Action("create-or-edit", "employee", new { Id = item.Id })"
                               title="Edit" class="text-primary">
                                <svg width="20" height="20" fill="none" stroke="currentColor"
                                     viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path>
                                </svg>
                            </a>

                            <!-- Delete -->
                            <form method="post"
                                  action="@Url.Action("delete", "employee", new { id = item.Id })"
                                  onsubmit="return confirm('Are you sure you want to delete this employee?');"
                                  style="display:inline;">
                                <button type="submit" class="btn btn-link p-0 m-0 text-danger"
                                        title="Delete">
                                    <svg width="20" height="20" fill="none" stroke="currentColor"
                                         viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                              stroke-width="2"
                                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5-4h4m-4 4v12m4-12v12"></path>
                                    </svg>
                                </button>
                            </form>
                        </td>
                    </tr>
                    sl++;
                }
            </tbody>



         
        </table>
    </div>

    <partial name="_Pagination" model="Model" />
</div>
 